# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ UX

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. üö´ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Ñ–æ–Ω–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–π –º–æ–¥–∞–ª–∫–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∑–∞ –Ω–µ–π

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
useEffect(() => {
  if (isOpen) {
    document.body.style.overflow = 'hidden';
  } else {
    document.body.style.overflow = 'unset';
  }
  
  return () => {
    document.body.style.overflow = 'unset';
  };
}, [isOpen]);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è ‚úÖ

### 2. üí∞ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω
**–ü—Ä–æ–±–ª–µ–º–∞:** –¶–µ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∫–∞–∫ `2.00 ‚ÇΩ`, `499.00 ‚ÇΩ` —Å –ª–∏—à–Ω–∏–º–∏ –¥–µ—Å—è—Ç–∏—á–Ω—ã–º–∏ –∑–Ω–∞–∫–∞–º–∏

**–ë—ã–ª–æ:**
```typescript
{product.retail_price.toLocaleString()} ‚ÇΩ  // "2.00 ‚ÇΩ"
```

**–°—Ç–∞–ª–æ:**
```typescript
{Math.round(product.retail_price).toLocaleString('ru-RU')} ‚ÇΩ  // "2 ‚ÇΩ"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- `2.00` ‚Üí `2 ‚ÇΩ`
- `499.00` ‚Üí `499 ‚ÇΩ`
- `1299.50` ‚Üí `1 300 ‚ÇΩ` (—Å —Ä—É—Å—Å–∫–∏–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º)

### 3. üì¶ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å –∫–∞–∫ `01.001.001.00` –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è DECIMAL

**–ë—ã–ª–æ:**
```typescript
–í—Å–µ–≥–æ –≤ –Ω–∞–ª–∏—á–∏–∏: {product.total_quantity} —à—Ç.
// –û—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å: "01.001.001.00 —à—Ç."
```

**–°—Ç–∞–ª–æ:**
```typescript
–í—Å–µ–≥–æ –≤ –Ω–∞–ª–∏—á–∏–∏: {Math.round(product.total_quantity)} —à—Ç.
// –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è: "13 —à—Ç."
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `13.00` ‚Üí `13 —à—Ç.`
- `01.00` ‚Üí `1 —à—Ç.`
- `02.00` ‚Üí `2 —à—Ç.`

## üìä –ì–¥–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### –í –∫–∞—Ç–∞–ª–æ–≥–µ (`CatalogHierarchical.tsx`):
1. ‚úÖ –¶–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤ (min/max range)
2. ‚úÖ –û—Å—Ç–∞—Ç–∫–∏ –≤ –æ–±—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ
3. ‚úÖ –û—Å—Ç–∞—Ç–∫–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –ø–æ —Ñ–∏–ª–∏–∞–ª—É

### –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ (`ProductModal.tsx`):
1. ‚úÖ –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω —Ç–æ–≤–∞—Ä–∞
2. ‚úÖ –û–±—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫
3. ‚úÖ –¶–µ–Ω—ã –≤ –∫–∞–∂–¥–æ–º –º–∞–≥–∞–∑–∏–Ω–µ
4. ‚úÖ –û—Å—Ç–∞—Ç–∫–∏ –≤ –∫–∞–∂–¥–æ–º –º–∞–≥–∞–∑–∏–Ω–µ
5. ‚úÖ –¶–µ–Ω—ã –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π —Ç–æ–≤–∞—Ä–∞
6. ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Ñ–æ–Ω–∞

## üéØ –ü—Ä–∏–º–µ—Ä—ã –¥–æ/–ø–æ—Å–ª–µ:

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ Brusko Minican 5 (18 W,1100mAh)
2 ‚ÇΩ
–î–æ—Å—Ç—É–ø–Ω–æ –≤ 40 –º–∞–≥–∞–∑–∏–Ω–∞—Ö
–í—Å–µ–≥–æ –≤ –Ω–∞–ª–∏—á–∏–∏: 014.0010.008.0013.00... —à—Ç.
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ Brusko Minican 5 (18 W,1100mAh)
2 ‚ÇΩ
–î–æ—Å—Ç—É–ø–Ω–æ –≤ 40 –º–∞–≥–∞–∑–∏–Ω–∞—Ö
–í—Å–µ–≥–æ –≤ –Ω–∞–ª–∏—á–∏–∏: 304 —à—Ç.
```

## üîç –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã:

–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL:
- –ü–æ–ª–µ `quanty` –∏–º–µ–µ—Ç —Ç–∏–ø `DECIMAL(10, 2)`
- –ü–æ–ª–µ `retail_price` –∏–º–µ–µ—Ç —Ç–∏–ø `DECIMAL(10, 2)`

–ü—Ä–∏ –≤—ã–±–æ—Ä–∫–µ –∏–∑ –ë–î –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –∫–∞–∫:
- `13.00` (—á–∏—Å–ª–æ —Å –¥–≤—É–º—è –¥–µ—Å—è—Ç–∏—á–Ω—ã–º–∏ –∑–Ω–∞–∫–∞–º–∏)
- `2.00`
- `499.00`

JavaScript `.toLocaleString()` –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–ª —ç—Ç–∏ —á–∏—Å–ª–∞ –∫–∞–∫:
- `13.00` ‚Üí `"13.00"` (—Å–æ—Ö—Ä–∞–Ω—è—è –¥–µ—Å—è—Ç–∏—á–Ω—ã–µ)
- –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ª–æ–∫–∞–ª–∏ –º–æ–≥–ª–æ –±—ã—Ç—å `"01.001.001.00"` –ø—Ä–∏ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. `Math.round()` - –æ–∫—Ä—É–≥–ª—è–µ—Ç –¥–æ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞ (—É–±–∏—Ä–∞–µ—Ç –¥–µ—Å—è—Ç–∏—á–Ω—ã–µ)
2. `.toLocaleString('ru-RU')` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å —Ä—É—Å—Å–∫–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ (–ø—Ä–æ–±–µ–ª—ã –¥–ª—è —Ç—ã—Å—è—á)

## üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

### –†—É—Å—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª:
```typescript
Math.round(1299.50).toLocaleString('ru-RU')  // "1 299"
Math.round(15000).toLocaleString('ru-RU')    // "15 000"
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ null/undefined:
```typescript
Math.round(product.quantity || 0)  // –ï—Å–ª–∏ null, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º 0
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:

–¢–µ–ø–µ—Ä—å –≤—Å–µ —á–∏—Å–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –¶–µ–Ω—ã –±–µ–∑ –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤
- ‚úÖ –û—Å—Ç–∞—Ç–∫–∏ —Ü–µ–ª—ã–º–∏ —á–∏—Å–ª–∞–º–∏
- ‚úÖ –†—É—Å—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø—Ä–æ–±–µ–ª—ã –≤–º–µ—Å—Ç–æ –∑–∞–ø—è—Ç—ã—Ö)
- ‚úÖ –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–π –º–æ–¥–∞–ª–∫–µ

## üîÑ –î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ dev mode.

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ production build:
```bash
cd frontend
npm run build
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ —Ü–µ–Ω–∞—Ö:

**‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:** –ï—Å–ª–∏ —Ü–µ–Ω—ã –≤ –ë–î –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ 2‚ÇΩ, 499‚ÇΩ - —ç—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
–ï—Å–ª–∏ —Ü–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –¥—Ä—É–≥–æ–π –≤–∞–ª—é—Ç–µ –∏–ª–∏ —Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º - –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ 1–° –∏–ª–∏ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ:
```sql
SELECT name, retail_price, quanty 
FROM catalog_items 
WHERE name LIKE '%Brusko%' 
LIMIT 5;
```

---

# üîô –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Browser History API –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

## üéØ –ü—Ä–æ–±–ª–µ–º–∞:

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–ª –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–í—Å–µ –º–∞–≥–∞–∑–∏–Ω—ã" –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∏–ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ü–∏–∏) –∏ –Ω–∞–∂–∏–º–∞–ª –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- ‚ùå –ï–≥–æ –ø–µ—Ä–µ–∫–∏–¥—ã–≤–∞–ª–æ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- ‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–æ—Å—å
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–µ—Ä—è–ª –∫–æ–Ω—Ç–µ–∫—Å—Ç

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å **Browser History API** —á–µ—Ä–µ–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω.

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

#### 1. **CatalogHierarchicalV2** (–ö–∞—Ç–∞–ª–æ–≥ V2) ‚úÖ
```typescript
// URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
/catalog-v2?shopSelector=true          // –û—Ç–∫—Ä—ã—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –º–∞–≥–∞–∑–∏–Ω–∞
/catalog-v2?category=123&shopSelector=true  // –° –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π
/catalog-v2?product=456                // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ–≤–∞—Ä–∞
```

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ "–í—Å–µ –º–∞–≥–∞–∑–∏–Ω—ã" –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `?shopSelector=true`
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ù–∞–∑–∞–¥" –±—Ä–∞—É–∑–µ—Ä —É–¥–∞–ª—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –∏ –º–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ: URL ‚Üî State

**–ö–æ–¥:**
```typescript
// –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
const handleOpenShopSelector = () => {
  setShowShopSelector(true);
  const newParams: any = {};
  if (categoryParam) newParams.category = categoryParam;
  if (searchParam) newParams.search = searchParam;
  newParams.shopSelector = 'true';
  setSearchParams(newParams);
};

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
const handleCloseShopSelector = () => {
  setShowShopSelector(false);
  const newParams: any = {};
  if (categoryParam) newParams.category = categoryParam;
  if (searchParam) newParams.search = searchParam;
  setSearchParams(newParams); // –£–±–∏—Ä–∞–µ–º shopSelector
};

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å URL (–∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥")
useEffect(() => {
  const shopSelectorParam = searchParams.get('shopSelector');
  if (shopSelectorParam === 'true') {
    if (!showShopSelector) setShowShopSelector(true);
  } else {
    if (showShopSelector) setShowShopSelector(false);
  }
}, [searchParams]);
```

#### 2. **CatalogHierarchical** (–ö–∞—Ç–∞–ª–æ–≥ V1) ‚úÖ
```typescript
// URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
/catalog?shopSelector=true  // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –º–∞–≥–∞–∑–∏–Ω–∞
```

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Browser History API.

#### 3. **Promotions** (–ê–∫—Ü–∏–∏) ‚úÖ
```typescript
// URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
/promotions?promotion=abc123  // –û—Ç–∫—Ä—ã—Ç–∞ –∞–∫—Ü–∏—è —Å ID abc123
```

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∞–∫—Ü–∏—é –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `?promotion={id}`
- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- –ú–æ–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∞–∫—Ü–∏—é

**–ö–æ–¥:**
```typescript
const openPromotionModal = (promotion: Promotion) => {
  setSelectedPromotion(promotion);
  setIsModalOpen(true);
  setSearchParams({ promotion: promotion.id });
};

const closePromotionModal = () => {
  setIsModalOpen(false);
  setSelectedPromotion(null);
  setSearchParams({}); // –£–±–∏—Ä–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä
};

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å URL
useEffect(() => {
  const promotionParam = searchParams.get('promotion');
  if (promotionParam) {
    const promotion = promotions.find(p => p.id === promotionParam);
    if (promotion && !isModalOpen) {
      setSelectedPromotion(promotion);
      setIsModalOpen(true);
    }
  } else {
    if (isModalOpen) {
      setIsModalOpen(false);
      setSelectedPromotion(null);
    }
  }
}, [searchParams, promotions]);
```

#### 4. **Vacancies** (–í–∞–∫–∞–Ω—Å–∏–∏) ‚úÖ
```typescript
// URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
/vacancies?vacancy=def456  // –û—Ç–∫—Ä—ã—Ç–∞ —Ñ–æ—Ä–º–∞ –æ—Ç–∫–ª–∏–∫–∞ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é def456
```

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –ü—Ä–∏ –∫–ª–∏–∫–µ "–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è" –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `?vacancy={id}`
- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É
- –ú–æ–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–æ–π –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

### 1. **–ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** ‚úÖ
- –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
- –ù–µ –ø–µ—Ä–µ–∫–∏–¥—ã–≤–∞–µ—Ç –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### 2. **Shareable Links** üìé
- –ú–æ–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∞–∫—Ü–∏—é
- –ú–æ–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é
- –ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ

### 3. **Bookmark Support** üîñ
- –ó–∞–∫–ª–∞–¥–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 4. **UX —É–ª—É—á—à–µ–Ω–∏—è** üé®
- –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üìä –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã:

### –ü—Ä–∏–º–µ—Ä 1: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–í—Å–µ –º–∞–≥–∞–∑–∏–Ω—ã"
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
   URL: /catalog-v2

2. –ù–∞–∂–∏–º–∞–µ—Ç "–í—Å–µ –º–∞–≥–∞–∑–∏–Ω—ã"
   URL: /catalog-v2?shopSelector=true
   ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ

3. –ù–∞–∂–∏–º–∞–µ—Ç "–ù–∞–∑–∞–¥" –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   URL: /catalog-v2
   ‚Üí –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚úÖ
```

### –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ü–∏–∏
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–∫—Ü–∏–π
   URL: /promotions

2. –ö–ª–∏–∫–∞–µ—Ç –Ω–∞ –∞–∫—Ü–∏—é "–°–∫–∏–¥–∫–∞ 20%"
   URL: /promotions?promotion=abc123
   ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏

3. –ù–∞–∂–∏–º–∞–µ—Ç "–ù–∞–∑–∞–¥"
   URL: /promotions
   ‚Üí –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚úÖ
```

### –ü—Ä–∏–º–µ—Ä 3: –û—Ç–∫–ª–∏–∫ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–∞–∫–∞–Ω—Å–∏–π
   URL: /vacancies

2. –ö–ª–∏–∫–∞–µ—Ç "–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è" –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é "–ü—Ä–æ–¥–∞–≤–µ—Ü"
   URL: /vacancies?vacancy=def456
   ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –æ—Ç–∫–ª–∏–∫–∞

3. –ù–∞–∂–∏–º–∞–µ—Ç "–ù–∞–∑–∞–¥"
   URL: /vacancies
   ‚Üí –§–æ—Ä–º–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚úÖ
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- React Router `useSearchParams` hook
- Browser History API
- URL query parameters

### –ü–∞—Ç—Ç–µ—Ä–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
1. **–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: State ‚Üî URL
2. **useEffect –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è** –∏–∑–º–µ–Ω–µ–Ω–∏–π URL
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**: –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è
4. **–ß–∏—Å—Ç—ã–π –∫–æ–¥**: —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

## üîç –ß—Ç–æ –ù–ï –∏—Å–ø—Ä–∞–≤–ª—è–ª–∏:

–ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, –∫–æ—Ç–æ—Ä—ã–µ –ù–ï —Ç—Ä–µ–±—É—é—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å browser history:
- **AuthModal** - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Å–∏—Å—Ç–µ–º–Ω–æ–µ)
- **AgeVerificationModal** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
- **MiniGame** - –º–∏–Ω–∏-–∏–≥—Ä–∞ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç)
- **Modal** –≤ Profile - –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –ø—Ä–æ—Ñ–∏–ª—è (–≤–ª–æ–∂–µ–Ω–Ω—ã–µ)

–≠—Ç–∏ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ù–ï –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å browser history, —Ç.–∫.:
- –û–Ω–∏ –≤–∞–∂–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- –î–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- –ù–µ –¥–æ–ª–∂–Ω—ã –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥"

---

# üìè –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤ –ê–∫—Ü–∏—è—Ö

## üéØ –ü—Ä–æ–±–ª–µ–º–∞:

–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π –∞–∫—Ü–∏–∏ –±—ã–ª–æ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º:
- ‚ùå –ó–∞–Ω–∏–º–∞–ª–æ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
- ‚ùå –ù–µ—É–¥–æ–±–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—ã–ª–æ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–º

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### 1. –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
**–ë—ã–ª–æ:**
```typescript
<Modal size="lg" className="max-h-[90vh] overflow-y-auto sm:max-h-[95vh]">
```

**–°—Ç–∞–ª–æ:**
```typescript
<Modal size="md" className="max-h-[90vh] overflow-y-auto">
```

### 2. –£–º–µ–Ω—å—à–µ–Ω–∞ –≤—ã—Å–æ—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
**–ë—ã–ª–æ:**
```typescript
<div className="relative h-64 md:h-80 overflow-hidden rounded-2xl">
```

**–°—Ç–∞–ª–æ:**
```typescript
<div className="relative h-48 md:h-56 overflow-hidden rounded-2xl">
```

### 3. –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞
**–ë—ã–ª–æ:**
```typescript
<h2 className="text-2xl md:text-3xl font-bold ...">
```

**–°—Ç–∞–ª–æ:**
```typescript
<h2 className="text-xl md:text-2xl font-bold ...">
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

### –†–∞–∑–º–µ—Ä—ã –¥–æ/–ø–æ—Å–ª–µ:
- **–®–∏—Ä–∏–Ω–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞**: lg (640px) ‚Üí md (512px)
- **–í—ã—Å–æ—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–º–æ–±–∏–ª—å–Ω—ã–µ)**: 256px ‚Üí 192px (-25%)
- **–í—ã—Å–æ—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–¥–µ—Å–∫—Ç–æ–ø)**: 320px ‚Üí 224px (-30%)
- **–†–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–º–æ–±–∏–ª—å–Ω—ã–µ)**: 24px ‚Üí 20px
- **–†–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–¥–µ—Å–∫—Ç–æ–ø)**: 30px ‚Üí 24px

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω–µ–µ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚úÖ –õ—É—á—à–µ —á–∏—Ç–∞–µ—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
- ‚úÖ –£–¥–æ–±–Ω–µ–µ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
- ‚úÖ –ë–æ–ª–µ–µ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏

---

---

# üè™ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Browser History –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ú–∞–≥–∞–∑–∏–Ω–æ–≤

## üéØ –ü—Ä–æ–±–ª–µ–º–∞:

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ú–∞–≥–∞–∑–∏–Ω—ã" –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ" –æ—Ç–∫—Ä—ã–≤–∞–ª–æ—Å—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ –º–∞–≥–∞–∑–∏–Ω–∞. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–∫–∏–¥—ã–≤–∞–ª–æ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- ‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–æ—Å—å

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Browser History API –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–µ—Ç–∞–ª–µ–π –º–∞–≥–∞–∑–∏–Ω–∞.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `/pages/Shops.tsx`:

**URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```typescript
/shops?shop=123  // –û—Ç–∫—Ä—ã—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–∞–≥–∞–∑–∏–Ω–∞ —Å ID 123
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
const openShopModal = (shop: Shop) => {
  setSelectedShop(shop)
  setSearchParams({ shop: shop.id.toString() })
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
const closeShopModal = () => {
  setSelectedShop(null)
  setSearchParams({})
}

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å URL
useEffect(() => {
  const shopParam = searchParams.get('shop')
  
  if (shopParam) {
    const shopId = parseInt(shopParam)
    const shop = shops.find(s => s.id === shopId)
    if (shop && (!selectedShop || selectedShop.id !== shop.id)) {
      setSelectedShop(shop)
    }
  } else {
    if (selectedShop) {
      setSelectedShop(null)
    }
  }
}, [searchParams, shops])
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- ‚úÖ –ú–æ–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∏ —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–¥—Ä–æ–±–Ω–µ–µ", –∏ —Å –∫–ª–∏–∫–∞–º–∏ –Ω–∞ –∫–∞—Ä—Ç–µ

---

# üîê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Browser History –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üéØ –ü—Ä–æ–±–ª–µ–º–∞:

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ "–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É" –∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–∫–∏–¥—ã–≤–∞–ª–æ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- ‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–æ—Å—å

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Browser History API –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Header.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `/components/Header.tsx`:

**URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```typescript
?auth=open  // –û—Ç–∫—Ä—ã—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å URL
useEffect(() => {
  const authParam = searchParams.get('auth')
  
  if (authParam === 'open') {
    if (!isAuthModalOpen) {
      setIsAuthModalOpen(true)
    }
  } else {
    if (isAuthModalOpen) {
      setIsAuthModalOpen(false)
    }
  }
}, [searchParams])

// –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
const openAuthModal = () => {
  setIsAuthModalOpen(true)
  const newParams = new URLSearchParams(searchParams)
  newParams.set('auth', 'open')
  setSearchParams(newParams)
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
const closeAuthModal = () => {
  setIsAuthModalOpen(false)
  const newParams = new URLSearchParams(searchParams)
  newParams.delete('auth')
  setSearchParams(newParams)
}
```

**–í–∞–∂–Ω–æ:**
- ‚úÖ –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ (–≤—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –≤—Ö–æ–¥–∞ ‚Üí —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞) –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚úÖ –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" (—Å—Ç—Ä–µ–ª–∫–∞) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫ –≤—ã–±–æ—Ä—É —Å–ø–æ—Å–æ–±–∞ –≤—Ö–æ–¥–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥—Ä—É–≥–∏–µ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

---

## üöÄ –ò—Ç–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. ‚úÖ **Browser History –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω**
   - –ö–∞—Ç–∞–ª–æ–≥ V1 & V2 (–≤—ã–±–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞)
   - –ê–∫—Ü–∏–∏ (–ø—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π)
   - –í–∞–∫–∞–Ω—Å–∏–∏ (—Ñ–æ—Ä–º–∞ –æ—Ç–∫–ª–∏–∫–∞)
   - **–ú–∞–≥–∞–∑–∏–Ω—ã (–¥–µ—Ç–∞–ª–∏ –º–∞–≥–∞–∑–∏–Ω–∞)** üÜï
   - **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** üÜï

2. ‚úÖ **–£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤ –ê–∫—Ü–∏—è—Ö**
   - –ë–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
   - –£–º–µ–Ω—å—à–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   - –£–º–µ–Ω—å—à–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫

3. ‚úÖ **–ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞** –≤–æ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö

---

## üìä –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω:

| –°—Ç—Ä–∞–Ω–∏—Ü–∞/–ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ | URL –ø–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç–∞—Ç—É—Å |
|-------------------|----------------|--------------|--------|
| CatalogHierarchicalV2 | –í—ã–±–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞ | `?shopSelector=true` | ‚úÖ |
| CatalogHierarchical | –í—ã–±–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞ | `?shopSelector=true` | ‚úÖ |
| Promotions | –î–µ—Ç–∞–ª–∏ –∞–∫—Ü–∏–∏ | `?promotion={id}` | ‚úÖ |
| Vacancies | –§–æ—Ä–º–∞ –æ—Ç–∫–ª–∏–∫–∞ | `?vacancy={id}` | ‚úÖ |
| Shops | –î–µ—Ç–∞–ª–∏ –º–∞–≥–∞–∑–∏–Ω–∞ | `?shop={id}` | ‚úÖ |
| Header | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | `?auth=open` | ‚úÖ |

---

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** - –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫, –∫–∞–∫ –æ–∂–∏–¥–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
2. **–ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Ç–µ—Ä—è–µ—Ç —Å–≤–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
3. **Shareable Links** - –º–æ–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∞–∫—Ü–∏—é, –≤–∞–∫–∞–Ω—Å–∏—é –∏–ª–∏ –º–∞–≥–∞–∑–∏–Ω
4. **Bookmark Support** - –∑–∞–∫–ª–∞–¥–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Ç–æ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
5. **–ù–∞—Ç–∏–≤–Ω—ã–π –æ–ø—ã—Ç** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–µ–¥–µ—Ç —Å–µ–±—è –∫–∞–∫ –Ω–∞—Ç–∏–≤–Ω–æ–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

---

# üìä –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂

## üéØ –ü—Ä–æ–±–ª–µ–º–∞:

–ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã" –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (ELFBAR BC5000, JUUL Starter Kit, SMOK Nord 4), –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –ø—Ä–æ–¥–∞–∂.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è **—Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–æ–ø –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤** –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–∞–±–ª–∏—Ü `purchases` –∏ `purchase_items`.

### Backend (API):

**–ù–æ–≤—ã–π endpoint:** `GET /api/catalog/products/popular/top`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤

**SQL –∑–∞–ø—Ä–æ—Å:**
```sql
SELECT 
  pi.name,
  pi.category,
  SUM(pi.quantity) as total_sold,
  COUNT(DISTINCT pi.check_id) as purchase_count,
  ROUND(AVG(pi.price)::numeric, 2) as avg_price,
  MAX(pi.price) as max_price,
  MIN(pi.price) as min_price
FROM purchase_items pi
INNER JOIN purchases p ON pi.check_id = p.check_id
WHERE 
  p.time_end >= NOW() - INTERVAL '30 days'
  AND pi.name IS NOT NULL
  AND pi.quantity > 0
GROUP BY pi.name, pi.category
ORDER BY total_sold DESC, purchase_count DESC
LIMIT $1
```

**–§–∞–π–ª—ã:**
- `/backend/src/controllers/catalogController.ts` - –º–µ—Ç–æ–¥ `getPopularProducts()`
- `/backend/src/routes/catalog.ts` - —Ä–æ—É—Ç –¥–ª—è endpoint

**–õ–æ–≥–∏–∫–∞:**
1. –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ø –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π –∏–∑ `purchase_items`
2. –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü (`total_sold`)
3. –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–æ–∫ (`purchase_count`)
4. –í—ã—á–∏—Å–ª—è–µ–º —Å—Ä–µ–¥–Ω—é—é, –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É
5. –û–±–æ–≥–∞—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏–∑ `catalog_items` (–Ω–∞–ª–∏—á–∏–µ, –æ—Å—Ç–∞—Ç–∫–∏)

### Frontend:

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:** `/frontend/src/components/home-blocks/PopularProductsBlock.tsx`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API
2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ badges –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ —Ç–æ–ø–µ:
   - 1 –º–µ—Å—Ç–æ: "–•–∏—Ç –ø—Ä–æ–¥–∞–∂" (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
   - –ü—Ä–æ–¥–∞–Ω–æ >50 —à—Ç: "–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ" (—Å–µ—Ä—ã–π)
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ: "–í—ã–±–æ—Ä –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π" (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)

3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–∫—É–ø–æ–∫:
   ```typescript
   rating = 4.5 + min(purchase_count / 200, 0.5)
   // –î–∏–∞–ø–∞–∑–æ–Ω: 4.5 - 5.0
   ```

4. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–∫—É–ø–æ–∫ –≤–º–µ—Å—Ç–æ "–æ—Ç–∑—ã–≤–æ–≤"
5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç "—Å—Ç–∞—Ä–æ–π" —Ü–µ–Ω—ã (+20% –∫ —Ç–µ–∫—É—â–µ–π)
6. Loading —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö
7. –°–∫—Ä—ã—Ç–∏–µ —Å–µ–∫—Ü–∏–∏, –µ—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö

**API –º–µ—Ç–æ–¥:** `/frontend/src/services/api.ts`
```typescript
async getPopularProducts(limit?: number)
```

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:

**Response:**
```json
{
  "success": true,
  "message": "Popular products fetched successfully",
  "data": {
    "products": [
      {
        "id": "uuid",
        "name": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞",
        "category": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è",
        "total_sold": 125,
        "purchase_count": 98,
        "price": 1299,
        "min_price": 1199,
        "max_price": 1399,
        "shop_code": "shop_001",
        "in_stock": true,
        "stock_quantity": 45
      }
    ],
    "period": "last_30_days",
    "timestamp": "2025-10-02T..."
  }
}
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

1. ‚úÖ **–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ø–æ–∫—É–ø–∞—é—Ç
2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - —Å–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂
3. ‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ä–µ–∞–ª—å–Ω—É—é –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤
4. ‚úÖ **–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥** - –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Ç–æ–ø
5. ‚úÖ **–î–æ–≤–µ—Ä–∏–µ** - —Ä–µ–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–º–µ—Å—Ç–æ "—Ä–µ–∫–ª–∞–º–Ω—ã—Ö" —Ç–æ–≤–∞—Ä–æ–≤

## üîç –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

### –ú–µ—Ç—Ä–∏–∫–∏:
- **total_sold** - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü —Ç–æ–≤–∞—Ä–∞
- **purchase_count** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–∫–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –±—ã–ª —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä
- **–ü–µ—Ä–∏–æ–¥** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

### –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases:
1. –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç –≤ catalog_items - –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ purchase_items
2. –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ–¥–∞–∂ –∑–∞ –º–µ—Å—è—Ü - —Å–µ–∫—Ü–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
3. Graceful fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API
4. Loading —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–≥–æ UX

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- SQL –∑–∞–ø—Ä–æ—Å —Å GROUP BY –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ 3 —Ç–æ–≤–∞—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `purchases.time_end` –∏ `purchase_items.check_id`

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç:

–¢–µ–ø–µ—Ä—å –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã" –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è **—Ä–µ–∞–ª—å–Ω—ã–µ —Ç–æ–ø –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã–µ —Ç–æ–≤–∞—Ä—ã** –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü, –∞ –Ω–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

**–ü—Ä–∏–º–µ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (–∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂)
- –†–µ–π—Ç–∏–Ω–≥ 4.5-5.0 (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–∫—É–ø–æ–∫)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–æ–∫ (–≤–º–µ—Å—Ç–æ "–æ—Ç–∑—ã–≤–æ–≤")
- –†–µ–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞
- Badge –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–∑–∏—Ü–∏–∏ –≤ —Ç–æ–ø–µ

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

**Backend:**
- `/backend/src/controllers/catalogController.ts` - –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ `getPopularProducts`
- `/backend/src/routes/catalog.ts` - –Ω–æ–≤—ã–π —Ä–æ—É—Ç

**Frontend:**
- `/frontend/src/services/api.ts` - –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ `getPopularProducts`
- `/frontend/src/components/home-blocks/PopularProductsBlock.tsx` - –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–í—Å–µ–≥–æ:** 4 —Ñ–∞–π–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–æ ‚úÖ

---

# üîç –£–ª—É—á—à–µ–Ω–∏—è UX: –ü–æ–∏—Å–∫, –ö–æ—Ä–∑–∏–Ω–∞ –∏ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üéØ –ü—Ä–æ–±–ª–µ–º—ã:

1. **–ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞** –≤ Header –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ (–Ω–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–ª–∞ –≤ –∫–∞—Ç–∞–ª–æ–≥)
2. **–ö–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã** –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ** –±—ã–ª–∏ –±–µ–∑ –∏–∫–æ–Ω–æ–∫ (–±–µ–ª—ã–µ toast)
4. **–õ–∏—à–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º –æ—Ç–≤–ª–µ–∫–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## ‚úÖ –†–µ—à–µ–Ω–∏—è:

### 1. üîç –ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `/frontend/src/components/Header.tsx`:**
- –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `handleSearchClick()` - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ `/catalog`
- –ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö:
  - Desktop header
  - Mobile header
  - Mobile menu

**–ö–æ–¥:**
```typescript
const handleSearchClick = () => {
  navigate('/catalog')
}
```

### 2. üõí –ö–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `/frontend/src/components/Header.tsx`:**
- –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `handleCartClick()` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è toast —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –≤–æ–π—Ç–∏
- –ï—Å–ª–∏ **–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω** - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã
- –î–æ–±–∞–≤–ª–µ–Ω–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã (–ø–æ–∫–∞ —Å –∑–∞–≥–ª—É—à–∫–æ–π "–∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞")

**–ö–æ–¥:**
```typescript
const handleCartClick = () => {
  if (!isAuthenticated) {
    toast.error('–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–∑–∏–Ω—É', {
      icon: 'üõí',
    })
    openAuthModal()
  } else {
    setIsCartModalOpen(true)
  }
}
```

**–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã:**
- –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω —Å –∏–∫–æ–Ω–∫–æ–π –∫–æ—Ä–∑–∏–Ω—ã
- –°–æ–æ–±—â–µ–Ω–∏–µ "–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞"
- –ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥"

### 3. üé® –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Toast)

–í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å —Å –∏–∫–æ–Ω–∫–∞–º–∏** (–∫–∞–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ö–æ–Ω—Ç–∞–∫—Ç—ã").

**–ò–∑–º–µ–Ω–µ–Ω—ã —Ñ–∞–π–ª—ã:**
- `/frontend/src/pages/CatalogHierarchicalV2.tsx`
- `/frontend/src/pages/CatalogHierarchical.tsx`

**–ü—Ä–∏–º–µ—Ä—ã:**
```typescript
// –û—à–∏–±–∫–∏
toast.error('–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä—ã', { icon: 'üîç' })
toast.error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏', { icon: 'üìÇ' })
toast.error('–í—ã–±–µ—Ä–∏—Ç–µ –º–∞–≥–∞–∑–∏–Ω', { icon: 'üè™' })
toast.error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç —Ç–æ–≤–∞—Ä–∞', { icon: 'üì¶' })

// –£—Å–ø–µ—Ö
toast.success('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É', { icon: 'üõí' })
```

### 4. üö´ –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–£–±—Ä–∞–Ω—ã **–±–µ–ª—ã–µ toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º:

**–ò–∑–º–µ–Ω–µ–Ω—ã —Ñ–∞–π–ª—ã:**
- `/frontend/src/pages/Contact.tsx` - —É–±—Ä–∞–Ω toast "–ù–µ –∑–∞–±—É–¥—å—Ç–µ —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã!"
- `/frontend/src/pages/Vacancies.tsx` - —É–±—Ä–∞–Ω—ã toast –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–º–µ–Ω–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –§–æ—Ä–º–∞ —É–∂–µ –≤–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –õ–∏—à–Ω–∏–µ toast –æ—Ç–≤–ª–µ–∫–∞—é—Ç –æ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
- –£–ª—É—á—à–∞–µ—Ç UX - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –ø—Ä—è–º–æ –≤ —Ñ–æ—Ä–º–µ

## üìä –ò—Ç–æ–≥–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

‚úÖ **–ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –∫–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –∫–∞—Ç–∞–ª–æ–≥  
‚úÖ **–ö–æ—Ä–∑–∏–Ω–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –∫–æ—Ä–∑–∏–Ω—ã  
‚úÖ **–ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** - –≤—Å–µ toast —Å –∏–∫–æ–Ω–∫–∞–º–∏  
‚úÖ **–ú–µ–Ω—å—à–µ –æ—Ç–≤–ª–µ–∫–∞—é—â–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤** - —É–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è  
‚úÖ **–õ—É—á—à–∏–π UX** - –±–æ–ª–µ–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤  

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

**Frontend:**
- `/frontend/src/components/Header.tsx` - –ø–æ–∏—Å–∫, –∫–æ—Ä–∑–∏–Ω–∞, –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- `/frontend/src/pages/CatalogHierarchicalV2.tsx` - —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è toast
- `/frontend/src/pages/CatalogHierarchical.tsx` - —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è toast
- `/frontend/src/pages/Catalog.tsx` - —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è toast
- `/frontend/src/pages/Contact.tsx` - —É–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö toast
- `/frontend/src/pages/Vacancies.tsx` - —É–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö toast
- `/frontend/src/services/api.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–∫–æ–Ω–∫–∏ –≤ API interceptor (‚ö†Ô∏è –æ—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞, ‚ùå –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –æ—à–∏–±–∫–∏, üì° —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏)

**Backend:**
- `/backend/src/controllers/catalogController.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ TypeScript (category_name)

**–í—Å–µ–≥–æ:** 8 —Ñ–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ ‚úÖ

---

# üö´ –°–∏—Å—Ç–µ–º–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞

## üéØ –ü—Ä–æ–±–ª–µ–º–∞:

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω—É–∂–Ω–æ —Å–∫—Ä—ã–≤–∞—Ç—å –æ—Ç –ø–æ–∫–∞–∑–∞ –Ω–∞ —Å–∞–π—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–≤–∞—Ä—ã —Å–Ω—è—Ç—ã–µ —Å –ø—Ä–æ–¥–∞–∂–∏, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ç.–¥.), –Ω–æ –Ω–µ–ª—å–∑—è —É–¥–∞–ª—è—Ç—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–¥–∞–∂ –∏ –æ—Ç—á–µ—Ç–∞—Ö.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

–°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∞–±–ª–∏—Ü—ã `catalog_exclusions`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫—Ä—ã–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –∏–∑ –≤—Å–µ—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤ —Å–∞–π—Ç–∞ –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `catalog_exclusions`:

```sql
CREATE TABLE catalog_exclusions (
  id                INTEGER PRIMARY KEY,
  exclusion_type    VARCHAR NOT NULL,
  item_id           VARCHAR NOT NULL,
  reason            TEXT,
  created_at        TIMESTAMP,
  created_by        VARCHAR,
  is_active         BOOLEAN DEFAULT true
)
```

### Backend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

**1. –ú–æ–¥–µ–ª—å `CatalogExclusion`** (`/backend/src/models/CatalogExclusion.ts`):
- Sequelize –º–æ–¥–µ–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–µ–π –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π —Ç–∞–±–ª–∏—Ü—ã
- Timestamp –æ—Ç–∫–ª—é—á–µ–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è created_at –∏–∑ —Ç–∞–±–ª–∏—Ü—ã)

**2. –ú–µ—Ç–æ–¥ `getExcludedItemIds()`** –≤ `catalogController.ts`:
```typescript
private async getExcludedItemIds(): Promise<string[]> {
  try {
    const exclusions = await CatalogExclusion.findAll({
      where: { is_active: true },
      attributes: ['item_id']
    });
    return exclusions.map(e => e.item_id);
  } catch (error) {
    logger.error('Error fetching catalog exclusions:', error);
    return [];
  }
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤–æ –≤—Å–µ –º–µ—Ç–æ–¥—ã –∫–∞—Ç–∞–ª–æ–≥–∞:

**1. `getProducts()`** - –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤:
```typescript
const excludedIds = await this.getExcludedItemIds();
const where: any = { is_active: true };
if (excludedIds.length > 0) {
  where.id = { [Op.notIn]: excludedIds };
}
```

**2. `getProductsByCategoryId()`** - —Ç–æ–≤–∞—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–∞—Ö grouped –∏ shop

**3. `searchProducts()`** - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫:
- –ò—Å–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞

**4. `searchProductsGlobally()`** - –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫:
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å —É—á–µ—Ç–æ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é

**5. `getPopularProducts()`** - –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è limit * 10 —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –ø—Ä–æ–¥–∞–∂ (—É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –∑–∞–ø–∞—Å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)
- –§–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã–µ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ limit —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
```typescript
const catalogItem = await CatalogItem.findOne({
  where: {
    name: { [Op.iLike]: `%${product.name}%` },
    ...(excludedIds.length > 0 && { id: { [Op.notIn]: excludedIds } })
  },
  order: [['quanty', 'DESC']]
});
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** - —Ç–æ–≤–∞—Ä—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –ë–î, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ (is_active)  
‚úÖ **–¢—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ø–æ–ª–µ reason —Ö—Ä–∞–Ω–∏—Ç –ø—Ä–∏—á–∏–Ω—É –∏—Å–∫–ª—é—á–µ–Ω–∏—è  
‚úÖ **–ê—É–¥–∏—Ç** - created_by –∏ created_at –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π  
‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–∞—Ö –∫–∞—Ç–∞–ª–æ–≥–∞  

## üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `getExcludedItemIds()`
2. –ü–æ–ª—É—á–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ ID –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ (where `is_active = true`)
3. –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è —É—Å–ª–æ–≤–∏–µ `WHERE id NOT IN (excludedIds)` –≤–æ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã
4. –ò—Å–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–∏–≥–¥–µ –Ω–∞ —Å–∞–π—Ç–µ

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

**–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∏—Å–∫–ª—é—á–µ–Ω–∏—è:**
```sql
INSERT INTO catalog_exclusions (exclusion_type, item_id, reason, created_by, is_active)
VALUES ('manual', 'product-uuid', '–¢–æ–≤–∞—Ä —Å–Ω—è—Ç —Å –ø—Ä–æ–¥–∞–∂–∏', 'admin', true);
```

**–í—Ä–µ–º–µ–Ω–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–≤–∞—Ä:**
```sql
UPDATE catalog_exclusions 
SET is_active = false 
WHERE item_id = 'product-uuid';
```

**–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è:**
```sql
SELECT * FROM catalog_exclusions WHERE is_active = true;
```

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

**Backend:**
- `/backend/src/models/CatalogExclusion.ts` - –Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å ‚ú®
- `/backend/src/controllers/catalogController.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–æ –≤—Å–µ –º–µ—Ç–æ–¥—ã:
  - `getExcludedItemIds()` - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥
  - `getProducts()` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞—Ç–∞–ª–æ–≥
  - `getProductsByCategoryId()` - —Ç–æ–≤–∞—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - `searchProducts()` - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫
  - `searchProductsGlobally()` - –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
  - `getPopularProducts()` - –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã

**–í—Å–µ–≥–æ:** 2 —Ñ–∞–π–ª–∞ (1 –Ω–æ–≤—ã–π, 1 –æ–±–Ω–æ–≤–ª–µ–Ω) ‚úÖ

---

