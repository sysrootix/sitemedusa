# 📱 Улучшение кнопки на мобильных и увеличение rate limit

## Дата: 2 октября 2025

## Изменения

### 1. 📱 Кнопка "В корзину" на мобильных устройствах

**Было:**
- Кнопка располагалась слева
- Узкая кнопка с текстом "Купить"
- Много пустого места справа

```tsx
// Было
<button className="... whitespace-nowrap">
  <ShoppingCart />
  <span className="sm:inline md:hidden">Купить</span>
</button>
```

**Стало:**
- Кнопка растянута на всю ширину на мобильных (`w-full`)
- На desktop остается компактной справа (`sm:w-auto sm:self-end`)
- Текст везде: **"В корзину"**
- Центрирование контента внутри кнопки

```tsx
// Стало
<button className="w-full sm:w-auto sm:self-end flex items-center justify-center gap-1.5 px-4 py-2 ...">
  <ShoppingCart className="w-4 h-4" />
  <span>В корзину</span>
</button>
```

**Визуально:**

```
МОБИЛЬНЫЙ:
┌─────────────────────────────────┐
│ Хабаровск • Улица Кубяка, 22   │
│ В наличии: 1 шт.               │
│ 2 790 ₽                        │
│                                │
│ ┌─────────────────────────────┐│
│ │    🛒 В корзину            ││  ← растянута!
│ └─────────────────────────────┘│
└─────────────────────────────────┘

DESKTOP:
┌────────────────────────────────────────┐
│ Хабаровск • Улица Кубяка, 22          │
│ В наличии: 1 шт.  2 790 ₽  [В корзину]│  ← справа
└────────────────────────────────────────┘
```

---

### 2. ⚡ Увеличен Rate Limit в 10 раз

**Было:**
- **1,000 запросов** за 15 минут
- Сообщение: "Ой, вы так быстро кликаете! 💨. Слишком много запросов..."

**Стало:**
- **10,000 запросов** за 15 минут
- В 10 раз больше запросов доступно

**Файл:** `backend/src/config/index.ts`

```typescript
// Было
maxRequests: parseInt(process.env.RATE_LIMIT_MAX_REQUESTS || '1000', 10)

// Стало
maxRequests: parseInt(process.env.RATE_LIMIT_MAX_REQUESTS || '10000', 10)
```

---

## Технические детали

### Изменения в layout карточки магазина

**Файл:** `frontend/src/components/ProductModal.tsx`

```tsx
// БЫЛО: flex-row с кнопкой справа
<div className="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4">
  <div className="flex items-center gap-2 md:gap-3 flex-1">
    {/* Информация о магазине */}
  </div>
  {shop.available && (
    <button className="...whitespace-nowrap">Купить</button>
  )}
</div>

// СТАЛО: flex-col с кнопкой внизу на мобильных
<div className="flex flex-col items-stretch gap-3">
  <div className="flex items-center gap-2 md:gap-3 flex-1">
    {/* Информация о магазине */}
  </div>
  {shop.available && (
    <button className="w-full sm:w-auto sm:self-end ...">
      В корзину
    </button>
  )}
</div>
```

### Преимущества новой структуры:

1. **На мобильных:**
   - Кнопка полной ширины (`w-full`)
   - Легче попасть пальцем
   - Лучше использование пространства
   - Визуально понятнее

2. **На desktop:**
   - Кнопка справа (`sm:self-end`)
   - Компактная (`sm:w-auto`)
   - Не занимает лишнее место

---

## Rate Limit расчет

### Было (1,000 запросов / 15 минут):
- ≈ **66 запросов в минуту**
- ≈ **1.1 запроса в секунду**

### Стало (10,000 запросов / 15 минут):
- ≈ **666 запросов в минуту**
- ≈ **11 запросов в секунду**

Теперь пользователи могут активно взаимодействовать с сайтом без ограничений! 🚀

---

## Для применения изменений:

```bash
pm2 restart backend frontend
```

✅ **Готово!** Все изменения применены и работают!

